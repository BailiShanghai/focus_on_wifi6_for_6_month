安全基础知识
=====================

安全问题
--------------

安全问题

 - 机密性
 - 完整性
 - 认证
 - 不可否认性

常见攻击类型：

 - DoS
 - 中间人
 - 伪造
 - 纂改
 - 重放
 - 字典
 - 暴力
 - 生日

对称加密
--------

公钥加密
-----------

密钥配送方法：

| 方法 | 缺点 |
-|-|
| 事先共享密钥 | 要管理的密钥数量太大，N 人相互通信要 N*(N-1)/2 个密钥 |
|密钥分配中心分配| 密钥中心工作量太大 |
| DH 算法交换| |
| 公钥算法| |

***公钥算法的缺点是效率较低***


单向散列函数
-------------

特点

 - 输出长度固定
 - 消息不同，散列值也不同
 - 单向性，无法由散列值计算结果

抗碰撞性

 - 弱抗碰撞性 - 要找到和当前消息具有相同散列值的另一条消息非常困难
 - 强抗碰撞性 - 要找到找到任意两个具有相同散列值的消息非常困难

应用

 - 检测纂改
 - 基于口令的加密
 - 消息认证码
 - 数字签名
 - 伪随机数生成

标准

| 标准 |散列值长度 | 是否安全 | 描述|
-|-|-|-|
MD5 | 128 | 否 | 强抗碰撞已攻破|
SHA-1 | 160 | 否 | 强抗碰撞已攻破 |
SHA-2 | 224/256/384/512 | 是 | |
SHA-3 | 224/256/384/512 | 是 | |

SHA-3 与 SHA-2 差异

 - 与 SHA-2 结构不同
 - 结构清晰，易于分析
 - **能适用各种设备，也知用于嵌入式应用**
 - 在硬件上实现性能高
 - 更安全


攻击方法

 - 暴力破解
 - 生日攻击

问题

 - 无法防伪造

消息认证码
-------------

与密钥关联的单向散列函数。

攻击：

 - 重放攻击

解决重放攻击方法：

 - 序号
 - 时间戳
 - Nounce

问题：

 - 密钥配送
 - 对第三方证明
 - 防止否认

数字签名
-------------

与私钥关联的单向散列函数。

直接对消息使用私钥加密速度慢，因此，一般先对消息进行单向散列，然后再对散列值进行私钥签名。

实现

 - RSA 签名
 - ElGamal 签名
 - DSA (NIST 制定的规范，为 ElGamal 变形)
 - ECDSA


对数字签名的攻击：

 - 中间人 (拿到的是否为正确的公钥)

问题：

 - 拿到的公钥是否为真正的公钥
 - 中间人攻击

证书
-------------

使用权威机构的私钥对公钥进行签名。

证书规范

 - X.509 规范 (ITU/ISO 制订的规范)

X.509 基本内容：

 - 证书序号
 - 证书颁发者
 - 公钥所有者
 - SHA-1 指纹
 - MD5 指纹
 - 证书 ID
 - 有效期起始时间
 - 有效期结束时间
 - 散列算法
 - 密钥类型
 - 密钥 ID
 - 密钥用途

PKI - 公钥基础设施

PKI 组成

| 组成 |描述| 职责 |
-|-|-|
|用户|使用 PKI 的人|生成密钥对(也可由认证机构生成)<br>在认证机构注册公钥<br>向认证机构申请证书<br>依据需要申请作废证书|
|认证机构(CA)|颁发证书的人|生成密钥对(也可由用户生成)<br>在注册公钥时对申请人进行认证<br>生成并颁发证书<br>作废证书|
|仓库|保存证书的数据库|

认证机构通常会分多层，最高级的认证机构为 root CA。

对证书的攻击

 - 注册之前攻击
 - 窃取认证机构的私钥
 - 伪装成认证机构
 - 占 CRL 空子

